<!DOCTYPE html>
<html style="font-size: 16px">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta charset="utf-8" />
    <meta
      name="keywords"
      content="University name, Course name, Lectures, Assignments and Labs"
    />
    <meta name="description" content="" />
    <meta name="page_type" content="np-template-header-footer-from-plugin" />
    <title>Home</title>
    <link rel="stylesheet" href="nicepage.css" media="screen" />
    <link rel="stylesheet" href="Container.css" media="screen" />
    <script
      class="u-script"
      type="text/javascript"
      src="jquery.js"
      defer=""
    ></script>
    <script
      class="u-script"
      type="text/javascript"
      src="nicepage.js"
      defer=""
    ></script>
    <meta name="generator" content="Nicepage 4.3.3, nicepage.com" />
    <link
      id="u-theme-google-font"
      rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i|Open+Sans:300,300i,400,400i,600,600i,700,700i,800,800i"
    />
    <link
      id="u-page-google-font"
      rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=Space+Mono:400,400i,700,700i"
    />

    <script type="application/ld+json">
      {
        "@context": "http://schema.org",
        "@type": "Organization",
        "name": ""
      }
    </script>
    <meta name="theme-color" content="#478ac9" />
    <meta property="og:title" content="Home" />
    <meta property="og:type" content="website" />
  </head>
  <body class="u-body">
    <section
      class="u-align-center u-clearfix u-gradient u-section-1"
      id="sec-ffb4"
    >
      <div class="u-align-center u-clearfix u-sheet u-sheet-1">
        <h2 class="u-custom-font u-text u-text-default u-text-1" id="uname">
          University name
        </h2>
        <h2
          class="u-custom-font u-text u-text-body-alt-color u-text-default u-text-1"
          id="cname"
        >
          Course name
        </h2>
        <p
          class="u-align-center u-custom-font u-text u-text-white u-text-2"
          id="cnumber"
        >
          Course number
        </p>
        <h2 class="u-align-center u-custom-font u-text u-text-3">Stars</h2>

        <p
          class="u-custom-font u-text u-text-body-alt-color u-text-4"
          id="cdesc"
        >
          Course description
        </p>
        <a
          href="randomwebsite"
          class="u-btn u-btn-round u-button-style u-radius-30 u-text-hover-palette-1-base u-btn-1"
          id="cwebsite"
          >Course website</a
        >
        <p class="u-custom-font u-text u-text-white u-text-5">Course group</p>
      </div>
    </section>
    <section
      class="u-align-center u-clearfix u-gradient u-section-2"
      id="sec-8b8b"
    ></section>

    <section class="u-clearfix u-gradient u-section-2" id="sec-c8d2">
      <div class="u-clearfix u-sheet u-sheet-1">
        <h1
          class="u-align-center u-custom-font u-text u-text-body-alt-color u-text-default u-text-1"
        >
          Reviews
        </h1>
        <div
          class="u-clearfix u-expanded-width-md u-expanded-width-sm u-expanded-width-xs u-gutter-0 u-layout-wrap u-white u-layout-wrap-1"
        >
          <div class="u-layout" id="commentBox">
      
          </div>
        </div>
      </div>
    </section>

    <script>
      function getSearchParameters() {
        var prmstr = window.location.search.substr(1);
        return prmstr != null && prmstr != ""
          ? transformToAssocArray(prmstr)
          : {};
      }

      function transformToAssocArray(prmstr) {
        var params = {};
        var prmarr = prmstr.split("&");
        for (var i = 0; i < prmarr.length; i++) {
          var tmparr = prmarr[i].split("=");
          params[tmparr[0]] = tmparr[1];
        }
        return params;
      }
      function setAllValues(data) {
        document.getElementById("uname").innerHTML = data.college;
        document.getElementById("cnumber").innerHTML = data.number;
        document.getElementById("cname").innerHTML = data.name;
        document.getElementById("cdesc").innerHTML = data.description;
        document.getElementById("cwebsite").href = data.website;
      }

      function addComments(commentData){

        var toAdd = "";
        for (let i = 0; i< commentData.length; i++){
          var commentDiv = `<div class="u-layout-row">
                <div
                  class="u-align-center-sm u-align-center-xs u-align-left-lg u-align-left-md u-align-left-xl u-container-style u-layout-cell u-left-cell u-size-13 u-layout-cell-1"
                >
                  <div
                    class="u-border-2 u-border-grey-75 u-container-layout u-valign-middle-sm u-valign-middle-xs u-valign-top-lg u-valign-top-xl u-container-layout-1"
                  >
                    <div
                      alt=""
                      class="u-align-left u-expanded-width-lg u-expanded-width-md u-expanded-width-xl u-image u-image-circle u-image-1"
                      src=""
                      data-image-width="256"
                      data-image-height="256"
                    ></div>
                    <p class="u-custom-font u-text u-text-default u-text-2">
                      ${commentData[i].uid}

                    </p>
                  </div>
                </div>
                <div
                  class="u-align-center-sm u-align-center-xs u-align-left-lg u-align-left-md u-align-left-xl u-container-style u-layout-cell u-right-cell u-size-47 u-layout-cell-2"
                >
                  <div
                    class="u-border-2 u-border-grey-75 u-container-layout u-valign-top-lg u-valign-top-md u-valign-top-sm u-valign-top-xl u-container-layout-2"
                  >
                    <p
                      class="u-align-center-xs u-align-left-lg u-align-left-md u-align-left-sm u-align-left-xl u-custom-font u-text u-text-default u-text-3"
                    >
                      ${commentData[i].comment}
                    </p>
                  </div>
                </div>
              </div>`
              toAdd += commentDiv;
            }
            document.getElementById("commentBox").innerHTML = toAdd;

        }
      var params = getSearchParameters();
      let uid = params.uid;
      fetch(
        "https://us-central1-boilermake-339015.cloudfunctions.net/get_course_data?req_id=" +
          uid
      )
        .then((response) => response.json())
        .then((data) => setAllValues(data));
        fetch(
        "https://us-central1-boilermake-339015.cloudfunctions.net/get_comments?req_id=" +
          uid
      )
        .then((response) => response.json())
        .then((commentdata) => addComments(commentdata));
    </script>
  </body>
</html>
